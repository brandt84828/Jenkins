## 軟體發展生命週期
軟體發展生命週期叫SDLC（Software Development Life Cycle），集合了計畫、開發、測試、部署過程。

![SDLC](/Pictures/SDLC.png)

### 需求分析
第一階段，根據專案需求，團隊執行一個可行性計畫分析，項目需求是公司內部或者客戶提出。這個階段主要是收集資訊，也可能對現有項目進行改善和做一個新專案，還要分析專案的預算和時間，從哪方面收益和佈局。

### 設計
第二階段，系統架構和狀態，要做成什麼樣子，實現什麼功能，創建一個專案計畫，可以用圖表、佈局設計、文案方式呈現。

### 實現
第三階段，專案經理和開發人員配合，開發人員根據任務和設計階段定義進行開發程式，根據專案大小和複雜度，可能需要數月或更長時間來完成。

### 測試
第四階段，測試人員進行測試，包括功能測試、Code測試、壓力測試等。

### 進化
第五階段，對產品進行改進和維護階段，根據使用者的使用回饋，修改功能，bug修復。

## 軟體發展瀑布模型
瀑布模型是最著名和最常使用的軟體發展模型。瀑布模型就是一系列的軟體發展過程。它是由製造業繁衍出來的。一個高度化的結構流程在一個方向上流動，有點像生產線一樣。在瀑布模型創建之初，沒有其它開發的模型，有很多東西全靠開發人員去猜測，去開發。這樣的模型僅適用於那些簡單的軟體發展，但是已經不適合現在的開發了。

![Waterfall](/Pictures/waterfall.png)

|                  優勢                  |                                          劣勢                                          |
| :------------------------------------: | :------------------------------------------------------------------------------------: |
|             簡單易用和理解             |           各個階段的劃分完全固定，階段之間產生大量的文檔，極大地增加了工作量           |
| 當前一階段完成後，只需要去關注後續階段 | 由於開發模型是線性的，使用者只有等到整個過程的末期才能見到開發成果，從而增加了開發風險 |
|     為項目提供按階段劃分的檢查節點     |                                 不適應使用者需求的變化                                 |


## 軟體敏捷開發模型
敏捷開發（Agile Development）的核心是迭代開發（Iterative Development）與增量開發（Incremental Development）。

### 迭代開發
對於大型軟體專案，傳統的開發方式是採用一個大週期（比如一年）進行開發，整個過程就是一次大開發。迭代開發的方式則不一樣，它將開發過程拆分成多個小週期，即一次大開發變成多次小開發，每次小開發都是同樣的流程，所以看上去就好像重複在做同樣的步驟。
舉例來說，SpaceX公司想造一個大推力火箭，將人類送到火星。但是，它不是一開始就造大火箭，而是先造個最簡陋的小火箭Falcon 1。結果，第一次發射就爆炸了，直到第四次發射，才成功進入軌道。然後，開發了中型火箭Falcon 9，九年中發射了70次。最後，才開發Falcon重型火箭。如果SpaceX不採用迭代開發，它可能直到現在還無法上天。

### 增量開發
軟體的每個版本，都會新增一個使用者可以感知的完整功能。也就是說，按照新增功能來劃分迭代。
舉例來說，房產公司開發一個10棟樓的社區。如果採用增量開發的模式，該公司第一個迭代就是交付一棟樓，第二個迭代交付第二棟樓……每個迭代都是完成一棟樓，而不是第一個迭代挖好10棟樓的地基，第二個迭代建好每棟樓的骨架，第三個迭代架設屋頂等。

### 敏捷開發如何迭代
雖然敏捷開發將軟體開發分成多個迭代，但是也要求每次迭代都是一個完整個軟體開發週期，必須按照軟體工程的方法論，進行正規的流程管理。

### 敏捷開發的好處
* 早期交付:
敏捷開發的第一個好處，就是早期交付，從而大大降低成本。
以上一節的房產公司為例，如果按照傳統的瀑布開發模式，先挖10棟樓的地基、再蓋骨架、然後架設屋頂，每個階段都等到前一個階段完成後開始，可能需要兩年才能一次性交付10棟樓。也就是說，如果不考慮預售，該項目必須等到兩年後才能回款。
敏捷開發是六個月後交付第一棟樓，後面每兩個月交付一棟樓。因此，半年就能回款10%，後面每個月都會有現金流，資金壓力就大大減輕了。

* 降低風險:
敏捷開發的第二個好處是，及時瞭解市場需求，降低產品不適用的風險。
請想一想，哪一種情況損失比較小：10棟樓都造好以後，才發現賣不出去，還是造好第一棟樓，就發現賣不出去，從而改進或停建後面9棟樓？

## 持續整合 
持續整合（Continuous Integration，簡稱CI）指的是:頻繁地（一天多次）將Code整合到主幹。
持續整合的目的，就是讓產品可以快速迭代，同時還能保持高品質。它的核心措施是，Code整合到主幹之前必須通過自動化測試。只要有一個測試用例失敗，就不能整合。
通過持續整合，團隊可以快速的從一個功能到另一個功能，簡而言之，敏捷軟體發展很大一部分都要歸功於持續整合。

根據持續整合的設計，Code從提交到生產，整個過程有以下幾步:

* 提交

流程的第一步，是開發者到Code倉庫提交Code。所有後面的步驟都開始於本地Code的一次提交（commit）。

* 測試（第一輪）
  
Code倉庫對commit操作配置了鉤子（hook），只要提交Code或者合併進主幹，就會跑自動化測試。

* 構建

通過第一輪測試，Code就可以合併進主幹，就算可以交付了。
交付後，就先進行構建（build），再進入第二輪測試。所謂構建，指的是將源碼轉換為可以運行的實際Code。比如安裝依賴，配置各種資源（樣式表、JS腳本、圖片）等等。

* 測試（第二輪）

構建完成，就要進行第二輪測試，如果第一輪測試涵蓋了所有內容，第二輪可以省略。

* 部署

過了第二輪測試，當前Code就是一個可以直接部署的版本（artifact）。將這個版本的所有檔打包（tarfilename.tar*）存檔，發到生產伺服器。

* 回滾

一旦當前版本發生問題，就要回滾到上一個版本的構建結果。最簡單的做法就是修改一下符號連結，指向上一個版本的目錄。

###  持續整合的組成要素
* 一個自動構建過程，從檢查Code、編譯構建、運行測試、結果記錄、測試統計等都是自動完成的，無需人工干預
* 一個Code儲存庫，即需要版本控制軟體來保障Code的可維護性，同時作為構建過程的資料庫，一般使用SVN或Git
* 一個持續整合伺服器，Jenkins/gitlab CICD就是一個配置簡單和使用方便的持續整合伺服器


### 持續整合的好處
* 降低風險，由於持續整合不斷去構建，編譯和測試，可以很早期發現問題，所以修復的代價就少
* 對系統健康持續檢查，減少發佈風險帶來的問題
* 減少重複性工作
* 持續部署，提供可部署單元包
* 持續交付可供使用的版本
* 增強團隊信心


## Jenkins介紹
Jenkins是一款流行的開源持續整合（Continuous Integration）工具，廣泛用於專案開發，具有自動化構建測試和部署等功能。

![jenkins](Pictures/jenkinslogo.png)

Jenkins的特色：

* 開源的Java語言開發持續整合工具，支援持續整合，持續部署
* 易於安裝部署配置：可透過yum安裝，或下載war包以及透過docker容器等快速實現安裝部署，可方便web介面配置管理
* 消息通知及測試報告：整合RSS/E-mail通過RSS發佈構建結果，或當構建完成時通過E-mail通知，生成JUnit/TestNG測試報告
* 分散式構建：支援Jenkins能夠讓多台電腦一起構建/測試
* 文件識別：Jenkins能夠跟蹤哪次構建生成哪些jar，哪次構建使用哪個版本的jar等
* 豐富的外掛程式支持：支援擴展外掛程式，可以開發適合自己團隊使用的工具，如git，svn，maven，docker等

## Jenkins安裝和持續整合環境配置

### 持續整合流程說明

![CI Flow](Pictures/CI%20flow.jpg)

1. 首先，開發人員每天進行提交，提交到Git倉庫
2. Jenkins作為持續集成工具，使用Git工具到Git倉庫拉取Code到CI Server，再配合JDK，Maven等軟體完成編譯、測試、審查、打包等工作，在這個過程中每一步出錯，都重新再執行一次整個流程
3. 最後，Jenkins把生成的jar或war包分發到測試伺服器或者生產伺服器，測試人員或用戶就可以存取/訪問


### Server List

| Name                    | IP             | Installed software                                  |
| :---------------------- | :------------- | :-------------------------------------------------- |
| 原始碼託管服務器        | 192.168.66.100 | Gitlab-12.4.2                                       |
| CI Server               | 192.168.66.101 | Jenkins-2.190.3, JDK1.8, Maven3.6.2, Git, SonarQube |
| Application Test Server | 192.168.66.102 | JDK1.8, Tomcat8.5                                   |

GitLab代碼託管服務安裝
GitLab簡介
GitLab是一個用於倉庫管理系統的開源專案，使用Git作為代碼管理工具，並在此基礎上搭建起來的web服務。
GitLab和GitHub一樣屬於協力廠商基於Git開發的作品，免費且開源（基於MIT協議），與Github類似，可以註冊用戶，任意提交你的代碼，添加SSHKey等等。不同的是，GitLab是可以部署到自己的伺服器上，資料庫等一切資訊都掌握在自己手上，適合團隊內部協作開發，簡單來說可把GitLab看作個人版的GitHub。

GitLab安裝
